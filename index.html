<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Makoi Inventory System — POS</title>
  <style>
    :root{
      --bg:#f4f5fb;--card:#ffffff;--accent:#2563eb;--accent-soft:#dbeafe;
      --border:#e5e7eb;--text-main:#111827;--text-muted:#6b7280;
      --danger:#dc2626;--success:#16a34a
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{margin:0;background:var(--bg);color:var(--text-main);padding:18px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(17,24,39,0.04);max-width:1100px;margin:12px auto}
    h1{margin:0 0 12px;font-size:20px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    label{display:block;font-size:13px;color:var(--text-muted);margin-bottom:6px}
    input[type=text],input[type=number],select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;font-size:14px}
    button{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.ghost{background:transparent;color:var(--text-main);border:1px solid var(--border)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid #f1f1f1;text-align:left}
    .muted{color:var(--text-muted)}
    .flex-between{display:flex;justify-content:space-between;align-items:center}
    .suggestions{position:relative}
    .suggestions-list{position:absolute;left:0;right:0;top:44px;background:#fff;border:1px solid var(--border);border-radius:8px;max-height:220px;overflow:auto;z-index:20;display:none}
    .suggestion{padding:8px;cursor:pointer;border-bottom:1px solid #f6f6f6}
    .suggestion:last-child{border-bottom:none}
    .suggestion:hover{background:#f3f8ff}
    @media print{
      body{background:white;padding:0}
      .no-print{display:none}
      .card{box-shadow:none;border:none;border-radius:0;padding:8px;margin:0}
      @page { size: A4; margin: 12mm; }
    }
    /* small helpers */
    .text-right{ text-align:right }
    .text-center{ text-align:center }
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#f3f4f6;border:1px solid #e5e7eb}
  </style>
</head>
<body>
  <div class="card no-print">
    <div class="flex-between">
      <h1>Makoi Inventory System — POS</h1>
      <div>
        <button id="btnExportAll" title="Export items as CSV">Export Items (CSV)</button>
        <button id="btnExportSales" title="Export sales as CSV">Export Sales (CSV)</button>
        <button id="btnBackup" title="Download JSON backup">Backup JSON</button>
        <button id="btnRestore" title="Restore from JSON">Restore JSON</button>
      </div>
    </div>

    <section style="margin-top:12px">
      <h3 style="font-size:14px;margin-bottom:8px">Add / Edit Item</h3>
      <div class="row">
        <div style="flex:1 1 380px">
          <label>Item name / description</label>
          <input id="itemNameInput" type="text" placeholder="Type item name... e.g. sprocket, bearing, oil" />
        </div>
        <div style="width:120px">
          <label>Quantity (pcs)</label>
          <input id="itemStockInput" type="number" min="0" />
        </div>
        <div style="width:140px">
          <label>Buying price (per pc)</label>
          <input id="itemBuyInput" type="number" min="0" />
        </div>
        <div style="width:140px">
          <label>Selling price (per pc)</label>
          <input id="itemSellInput" type="number" min="0" />
        </div>
        <div style="width:120px;align-self:end">
          <button id="btnSaveItem">Save item</button>
        </div>
      </div>
      <div style="margin-top:12px" class="flex-between">
        <div class="muted">Tip: To edit an item, search it in the list and click Edit. Renaming updates the same ID (no duplicates).</div>
        <div><button id="btnClearItems" class="ghost">Reset items</button></div>
      </div>
    </section>
  </div>

  <div class="card">
    <h3 style="font-size:14px">Record Sale</h3>
    <div class="row" style="align-items:end">
      <div style="flex:1 1 420px">
        <label>Search item (type to search) — autosearch</label>
        <div class="suggestions">
          <input id="saleSearchInput" type="text" placeholder="Start typing item name..." autocomplete="off" />
          <div id="saleSuggestions" class="suggestions-list"></div>
        </div>
      </div>
      <div style="width:100px">
        <label>Quantity</label>
        <input id="saleQtyInput" type="number" min="1" value="1" />
      </div>
      <div style="width:130px">
        <label>Selling price</label>
        <input id="saleSellPriceInput" type="number" />
      </div>
      <div style="width:130px">
        <label>Buying price</label>
        <input id="saleBuyPriceInput" type="number" />
      </div>
      <div style="width:140px">
        <label>Date</label>
        <input id="saleDateInput" type="date" />
      </div>
      <div style="width:120px;align-self:end">
        <button id="btnSaveSale">Save sale</button>
      </div>
    </div>

    <div style="margin-top:12px" class="flex-between no-print">
      <div>
        <button id="tabToday" class="ghost">Today</button>
        <button id="tabAll" class="ghost">All time</button>
      </div>
      <div>
        <button id="btnPrintSales">Print Sales (A4)</button>
      </div>
    </div>

    <div id="summary" style="display:flex;gap:12px;margin-top:20px;flex-wrap:wrap">
      <div style="flex:1;min-width:180px;background:#fff;padding:12px;border-radius:10px;border:1px solid var(--border)">
        <div class="muted">Total sales</div>
        <div id="summarySales" style="font-size:18px;font-weight:600">₱0</div>
      </div>
      <div style="flex:1;min-width:180px;background:#fff;padding:12px;border-radius:10px;border:1px solid var(--border)">
        <div class="muted">Total profit</div>
        <div id="summaryProfit" style="font-size:18px;font-weight:600">₱0</div>
      </div>
      <div style="flex:1;min-width:180px;background:#fff;padding:12px;border-radius:10px;border:1px solid var(--border)">
        <div class="muted">Recorded expenses</div>
        <div id="summaryExpenses" style="font-size:18px;font-weight:600">₱0</div>
      </div>
    </div>

    <div style="margin-top:16px">
      <table>
        <thead>
          <tr><th>Date</th><th>Item</th><th style="text-align:center">Qty</th><th style="text-align:right">Total</th><th style="text-align:right">Profit</th></tr>
        </thead>
        <tbody id="salesTbody"></tbody>
      </table>
    </div>
  </div>

  <div class="card no-print">
    <h3 style="font-size:14px">Expenses</h3>
    <div class="row" style="align-items:end">
      <div style="flex:1 1 420px">
        <label>Description</label>
        <input id="expDescInput" type="text" />
      </div>
      <div style="width:140px">
        <label>Amount</label>
        <input id="expAmountInput" type="number" />
      </div>
      <div style="width:140px">
        <label>Date</label>
        <input id="expDateInput" type="date" />
      </div>
      <div style="width:120px;align-self:end">
        <button id="btnSaveExpense">Save expense</button>
      </div>
    </div>
    <div style="margin-top:12px">
      <table>
        <thead><tr><th>Date</th><th>Description</th><th style="text-align:right">Amount</th></tr></thead>
        <tbody id="expensesTbody"></tbody>
      </table>
    </div>
  </div>

  <div class="card no-print">
    <h3 style="font-size:14px">Import / Paste Items (pipe format)</h3>
    <div style="margin-bottom:8px"><small class="muted">Paste lines like: <code>qty | name | buy | sell</code> — one item per line. Example: <code>3 | Saiyan Sprocket TMX 53T | 184 | 350</code></small></div>
    <textarea id="importItemsArea" rows="6" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border)"></textarea>
    <div style="margin-top:8px"><button id="btnImportItems">Import items from paste</button></div>
  </div>

  <div id="printArea" style="display:none"></div>

<script>
/* ---------- STORAGE & MIGRATION (Part 1) ---------- */
const STORAGE_PREFIX = 'makoi_inventory';
const STORAGE_KEY_V3 = STORAGE_PREFIX + '_v3';
const STORAGE_KEY_LEGACY_PREFIX = STORAGE_PREFIX; // detect legacy keys

function migrateIfNeeded(){
  if(localStorage.getItem(STORAGE_KEY_V3)) return;
  for(let i=0;i<localStorage.length;i++){
    const key = localStorage.key(i);
    if(key && key.startsWith(STORAGE_PREFIX) && key !== STORAGE_KEY_V3){
      try{
        const raw = localStorage.getItem(key);
        const parsed = JSON.parse(raw);
        // basic shape detection
        if(parsed && (Array.isArray(parsed.items) || Array.isArray(parsed.sales))){
          localStorage.setItem(STORAGE_KEY_V3, JSON.stringify(parsed));
          console.info('Migrated data from', key, 'to', STORAGE_KEY_V3);
          return;
        }
      }catch(e){ /* ignore invalid legacy */ }
    }
  }
}
migrateIfNeeded();

/* ---------- Helper utilities ---------- */
function uid(){ return Date.now() + Math.floor(Math.random()*1000); }
function todayISO(){ const d=new Date(); return d.toISOString().slice(0,10); }
function formatMoney(n){ return '₱' + Number(n||0).toLocaleString(); }
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* ---------- PLACEHOLDER: PART 2 WILL START HERE ---------- */
/* IMPORTANT: Do NOT remove this comment when concatenating parts.
   PART 2 will begin the seedItems array and initialization of state.
   After pasting PART 2, PART 3 and PART 4 the <script> will be completed. */
  /* ---------- PART 2: seedItems (361 items) + state init ---------- */
const seedItems = [
  { id: uid(), name: 'YK Horn Relay Socket Universal 5 Pin', stock: 3, buy: 62, sell: 0 },
  { id: uid(), name: 'SMOK S3 3LED Night Breaker', stock: 3, buy: 240, sell: 300 },
  { id: uid(), name: 'SMOK S6 6LED Night Breaker', stock: 3, buy: 250, sell: 350 },
  { id: uid(), name: 'DRX C06', stock: 3, buy: 250, sell: 370 },
  { id: uid(), name: 'DVS SD35 MDL Small Steel Gun', stock: 3, buy: 75, sell: 0 },
  { id: uid(), name: 'Battery Terminal Assorted', stock: 100, buy: 2, sell: 0 },
  { id: uid(), name: 'Otaka Bosch Relay Socket', stock: 3, buy: 23, sell: 0 },
  { id: uid(), name: 'Male and Female Socket', stock: 3, buy: 6, sell: 0 },
  { id: uid(), name: 'Otaka Tail Light Socket Universal', stock: 10, buy: 13, sell: 0 },
  { id: uid(), name: 'Otaka Fuse Box Housing', stock: 10, buy: 23, sell: 0 },
  { id: uid(), name: 'Otaka Air Filter Aerox155 V1', stock: 3, buy: 135, sell: 0 },
  { id: uid(), name: 'Saiyan Mini Horn 10s', stock: 3, buy: 34, sell: 0 },
  { id: uid(), name: 'BANDO Belt Aerox V1/2/Nmax V2', stock: 3, buy: 595, sell: 1785 },
  { id: uid(), name: 'Fuse Glass 10A', stock: 100, buy: 1.5, sell: 0 },
  { id: uid(), name: 'Fuse Glass 25A', stock: 100, buy: 1.5, sell: 0 },
  { id: uid(), name: 'Hella Spark Plug C10N-7 Long Tip', stock: 1, buy: 48, sell: 200 },
  { id: uid(), name: 'Beast Tire 70×90×14', stock: 4, buy: 960, sell: 1450 },
  { id: uid(), name: 'Beast Tire 80×90×14', stock: 4, buy: 1040, sell: 1480 },
  { id: uid(), name: 'Beast Tire 90×90×14', stock: 4, buy: 1180, sell: 1380 },
  { id: uid(), name: 'Beast Tire 100×80×14', stock: 4, buy: 1500, sell: 1850 },
  { id: uid(), name: 'TOP UP 200mL', stock: 1, buy: 48, sell: 65 },
  { id: uid(), name: 'Zeno Clutch Excel 20W50 1L', stock: 12, buy: 157, sell: 0 },
  { id: uid(), name: 'Zeno Scooter Pro 10W40 1L', stock: 12, buy: 168, sell: 0 },
  { id: uid(), name: 'Malubade Gear Oil 100mL', stock: 12, buy: 23, sell: 30 },
  { id: uid(), name: 'Saiyan Tire Sealant 500mL', stock: 12, buy: 48, sell: 120 },
  { id: uid(), name: 'YK Single Denso Wire Black', stock: 1, buy: 220, sell: 0 },
  { id: uid(), name: 'YK Single Denso Wire Blue', stock: 1, buy: 220, sell: 0 },
  { id: uid(), name: 'Otaka Chain 428H 110L', stock: 3, buy: 180, sell: 0 },
  { id: uid(), name: 'Otaka Chain 428H 120L', stock: 3, buy: 190, sell: 0 },
  { id: uid(), name: 'Otaka Chain 428H 132L', stock: 3, buy: 220, sell: 0 },
  { id: uid(), name: 'Petron ZR 200mL', stock: 1, buy: 36, sell: 70 },
  { id: uid(), name: 'DVS Optics Side Mirror Black (small)', stock: 3, buy: 200, sell: 300 },

  { id: uid(), name: 'DVS CP47 2835 Dual Lamp Y/W', stock: 3, buy: 25, sell: 340 },
  { id: uid(), name: 'DVS CP47 2835 Dual Lamp Y/B', stock: 3, buy: 25, sell: 340 },
  { id: uid(), name: 'Saiyan Handgrip 82 Yellow', stock: 3, buy: 138, sell: 280 },
  { id: uid(), name: 'Saiyan Carbon Brush Mio', stock: 3, buy: 13, sell: 30 },
  { id: uid(), name: 'Saiyan Carbon Brush Raider150', stock: 3, buy: 13, sell: 30 },
  { id: uid(), name: 'DVS Optics Side Mirror Black (bigger)', stock: 3, buy: 470, sell: 800 },
  { id: uid(), name: 'SMOK Headlight H4 Y/W', stock: 3, buy: 170, sell: 340 },
  { id: uid(), name: 'Otaka High/Low Switch Copper', stock: 3, buy: 11, sell: 25 },
  { id: uid(), name: 'Otaka Muffler Gasket Mio', stock: 25, buy: 4, sell: 10 },
  { id: uid(), name: 'Circlip Small', stock: 20, buy: 5, sell: 10 },
  { id: uid(), name: 'Fuel Filter Ordinary', stock: 20, buy: 32, sell: 50 },
  { id: uid(), name: 'Otaka Front Axle Mio', stock: 3, buy: 38, sell: 80 },
  { id: uid(), name: 'Otaka Front Axle Raider150', stock: 3, buy: 38, sell: 114 },
  { id: uid(), name: 'Cable Tie 4×100', stock: 4, buy: 2, sell: 4 },
  { id: uid(), name: 'Cable Tie 4×150', stock: 4, buy: 3, sell: 5 },
  { id: uid(), name: 'Saiyan Caliper Repair Kit R150 Rear', stock: 3, buy: 46, sell: 138 },
  { id: uid(), name: 'Saiyan Caliper Repair Kit R150 Front', stock: 3, buy: 46, sell: 138 },
  { id: uid(), name: 'Saiyan Caliper Repair Kit Mio', stock: 3, buy: 46, sell: 138 },
  { id: uid(), name: 'Saiyan Tappet Cap Sniper135', stock: 3, buy: 41, sell: 150 },
  { id: uid(), name: 'Saiyan Hydraulic Switch Rear', stock: 3, buy: 46, sell: 138 },
  { id: uid(), name: 'Otaka Horn Relay 5 Pin', stock: 3, buy: 70, sell: 130 },
  { id: uid(), name: 'Otaka Regulator Socket 4 Pin', stock: 3, buy: 19, sell: 60 },
  { id: uid(), name: 'Otaka Shock Bushing Small', stock: 3, buy: 5, sell: 10 },
  { id: uid(), name: 'Speed Thai Silicon Gasket', stock: 3, buy: 19, sell: 75 },
  { id: uid(), name: 'Stoplight Switch Front', stock: 3, buy: 32, sell: 70 },
  { id: uid(), name: 'Saiyan Overhauling Gasket Mio', stock: 3, buy: 77, sell: 300 },
  { id: uid(), name: 'Saiyan Overhauling Gasket Raider150', stock: 3, buy: 77, sell: 300 },
  { id: uid(), name: 'Saiyan Starter Relay M3', stock: 3, buy: 92, sell: 180 },
  { id: uid(), name: 'Saiyan Starter Relay Click 4 Pin', stock: 3, buy: 92, sell: 250 },
  { id: uid(), name: 'Saiyan Starter Relay Raider150', stock: 3, buy: 92, sell: 250 },
  { id: uid(), name: 'Saiyan Carb Repair Kit Raider150', stock: 3, buy: 84, sell: 200 },
  { id: uid(), name: 'Saiyan Carb Repair Kit XRM110', stock: 3, buy: 84, sell: 200 },
  { id: uid(), name: 'Saiyan Carb Repair Kit Sniper', stock: 3, buy: 84, sell: 200 },
  { id: uid(), name: 'Saiyan Chain Adjuster TMX', stock: 3, buy: 32, sell: 70 },
  { id: uid(), name: 'SMOK Dual Contact LED Y/B', stock: 3, buy: 60, sell: 120 },
  { id: uid(), name: 'SMOK Dual Contact LED Y/W', stock: 3, buy: 60, sell: 120 },
  { id: uid(), name: 'SMOK Dual Contact LED Y/R', stock: 3, buy: 60, sell: 120 },
  { id: uid(), name: 'Throttle Pipe White', stock: 3, buy: 28, sell: 70 },
  { id: uid(), name: 'Saiyan Caliper Repair Kit XRM', stock: 3, buy: 46, sell: 138 },
  { id: uid(), name: 'Saiyan Caliper Repair Kit Trinity', stock: 3, buy: 23, sell: 69 },
  { id: uid(), name: 'Saiyan Tappet Cap XRM', stock: 3, buy: 23, sell: 50 },
  { id: uid(), name: 'Saiyan Tappet Cap Wave125', stock: 3, buy: 23, sell: 50 },
  { id: uid(), name: 'Daytona Handgrip w/ Bar End', stock: 3, buy: 75, sell: 250 },
  { id: uid(), name: 'Saiyan Chain Adjuster Raider150', stock: 3, buy: 38, sell: 180 },
  { id: uid(), name: 'Otaka Flasher XRM (TMX) White', stock: 3, buy: 55, sell: 180 },

  { id: uid(), name: 'Orig Vbelt Click125 K35', stock: 4, buy: 352, sell: 709 },
  { id: uid(), name: 'Saiyan Brake Master Kit XRM', stock: 5, buy: 171, sell: 200 },
  { id: uid(), name: 'Saiyan Brake Master Kit Click', stock: 5, buy: 171, sell: 150 },
  { id: uid(), name: 'Saiyan Brake Master Kit Mio', stock: 5, buy: 171, sell: 150 },
  { id: uid(), name: 'Saiyan Brake Master Kit MMAX', stock: 5, buy: 171, sell: 150 },
  { id: uid(), name: 'Saiyan Brake Master Kit Wave125', stock: 5, buy: 171, sell: 150 },
  { id: uid(), name: 'Saiyan Brake Master Kit Sniper135', stock: 5, buy: 171, sell: 160 },
  { id: uid(), name: 'Saiyan SS3 Mini Driving Light', stock: 3, buy: 350, sell: 650 },
  { id: uid(), name: 'Saiyan SS4 Mini Driving Light', stock: 5, buy: 250, sell: 900 },
  { id: uid(), name: 'SMOK P45 T15 Yellow', stock: 5, buy: 35, sell: 200 },
  { id: uid(), name: 'SMOK P45 T15 Red', stock: 5, buy: 35, sell: 200 },
  { id: uid(), name: 'SMOK P45 T15 White', stock: 5, buy: 35, sell: 200 },
  { id: uid(), name: 'SMOK P45 T15 Blue', stock: 5, buy: 35, sell: 200 },
  { id: uid(), name: 'SMOK V3 Mini Driving Light', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'SMOK Lightened Disc MMAX', stock: 3, buy: 600, sell: 1200 },
  { id: uid(), name: 'Shihfa Tire 300×17', stock: 3, buy: 375, sell: 750 },
  { id: uid(), name: 'Shihfa Tire 250×17', stock: 3, buy: 425, sell: 850 },
  { id: uid(), name: 'Shihfa Tire 80×80×17', stock: 3, buy: 395, sell: 620 },
  { id: uid(), name: 'Shihfa Tire 100×80×17', stock: 3, buy: 340, sell: 680 },
  { id: uid(), name: 'Beast Tire 70×90×14 (alt)', stock: 3, buy: 620, sell: 880 },
  { id: uid(), name: 'Beast Tire 80×90×14 (alt)', stock: 3, buy: 740, sell: 1080 },
  { id: uid(), name: 'Beast Tire 90×90×14 (alt)', stock: 3, buy: 825, sell: 1200 },
  { id: uid(), name: 'Beast Tire 100×80×14 (alt)', stock: 3, buy: 1100, sell: 1650 },
  { id: uid(), name: 'BUU Tube 175×17', stock: 3, buy: 90, sell: 170 },
  { id: uid(), name: 'BUU Tube 300×17', stock: 3, buy: 100, sell: 180 },
  { id: uid(), name: 'Gripper Tube 225×17', stock: 3, buy: 90, sell: 170 },
  { id: uid(), name: 'BUU Tube 250×17', stock: 3, buy: 90, sell: 170 },
  { id: uid(), name: 'BUU Tube 275×17', stock: 3, buy: 100, sell: 180 },
  { id: uid(), name: 'Orig Vbelt Mio 125 M3', stock: 3, buy: 340, sell: 680 },
  { id: uid(), name: 'Saiyan Handle Switch Honeywell', stock: 3, buy: 176, sell: 580 },
  { id: uid(), name: 'Bosch Horn Evolution', stock: 3, buy: 230, sell: 580 },
  { id: uid(), name: 'Saiyan Rubber Dumper Trinity', stock: 3, buy: 50, sell: 80 },
  { id: uid(), name: 'Saiyan Clutch Lining R150', stock: 3, buy: 59, sell: 130 },
  { id: uid(), name: 'Otaka Oil Seal XRM110', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'Otaka Oil Seal TMX155', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'Saiyan Handle Switch Mio', stock: 3, buy: 200, sell: 360 },
  { id: uid(), name: 'Saiyan Fuel Cock XRM110', stock: 3, buy: 40, sell: 80 },
  { id: uid(), name: 'Otaka Brake Shoe XRM', stock: 3, buy: 40, sell: 80 },
  { id: uid(), name: 'Halo Horn', stock: 3, buy: 17, sell: 50 },
  { id: uid(), name: 'Saiyan FRZA Horn', stock: 3, buy: 109, sell: 350 },
  { id: uid(), name: 'Saiyan Handle Switch R150', stock: 3, buy: 109, sell: 300 },
  { id: uid(), name: 'Saiyan Handle Switch XRM110', stock: 3, buy: 89, sell: 280 },
  { id: uid(), name: 'Saiyan Piston Kit Wave125 STD', stock: 3, buy: 106, sell: 230 },
  { id: uid(), name: 'Otaka Sprocket XRM/Wave125 36T', stock: 3, buy: 56, sell: 120 },
  { id: uid(), name: 'Otaka Sprocket XRM/Wave125 38T', stock: 3, buy: 56, sell: 120 },
  { id: uid(), name: 'Saiyan Fuel Filter Raider150 FI', stock: 5, buy: 16, sell: 100 },

  { id: uid(), name: 'Osaki Throttle Cable Aerox155', stock: 5, buy: 352, sell: 700 },
  { id: uid(), name: 'Osaki Speed Cable XRM110', stock: 5, buy: 180, sell: 300 },
  { id: uid(), name: 'Osaki Speed Cable TMX155', stock: 5, buy: 180, sell: 300 },
  { id: uid(), name: 'Otaka Speed Cable Beat', stock: 5, buy: 132, sell: 300 },
  { id: uid(), name: 'Otaka Speed Cable Mio', stock: 5, buy: 123, sell: 300 },
  { id: uid(), name: 'Saiyan Handgrip 418 Blue', stock: 10, buy: 350, sell: 800 },
  { id: uid(), name: 'Pro Side Mirror Yamaha', stock: 10, buy: 75, sell: 280 },
  { id: uid(), name: 'Pro Side Mirror Honda', stock: 10, buy: 75, sell: 280 },
  { id: uid(), name: 'T19 Bulb', stock: 5, buy: 6, sell: 20 },
  { id: uid(), name: 'T20 Bulb', stock: 5, buy: 6, sell: 20 },
  { id: uid(), name: 'B35 Bulb', stock: 5, buy: 6, sell: 40 },
  { id: uid(), name: 'B8.5 Bulb', stock: 10, buy: 3, sell: 20 },
  { id: uid(), name: 'TRC 7117 Headlight White', stock: 5, buy: 100, sell: 200 },
  { id: uid(), name: 'TRC 7115 Headlight Blue', stock: 5, buy: 100, sell: 200 },
  { id: uid(), name: 'TRC 8105 12LED Headlight', stock: 5, buy: 100, sell: 150 },
  { id: uid(), name: 'TRC 8110 H4 Hi/Lo', stock: 5, buy: 150, sell: 250 },
  { id: uid(), name: 'Oil Filter Kawasaki', stock: 5, buy: 80, sell: 120 },
  { id: uid(), name: 'Oil Filter Bajaj', stock: 5, buy: 80, sell: 120 },
  { id: uid(), name: 'Oil Filter Yamaha', stock: 5, buy: 147, sell: 200 },
  { id: uid(), name: 'Fuel Hose Gray', stock: 3, buy: 25, sell: 0 },
  { id: uid(), name: 'JVT Center Spring Aerox 1000', stock: 3, buy: 380, sell: 700 },
  { id: uid(), name: 'JVT Center Spring Aerox 1200', stock: 3, buy: 380, sell: 800 },
  { id: uid(), name: 'JVT Center Spring Mio 1000', stock: 3, buy: 180, sell: 650 },
  { id: uid(), name: 'JVT Center Spring Mio 1200', stock: 3, buy: 230, sell: 700 },
  { id: uid(), name: 'JVT Pulley Set Mio', stock: 5, buy: 355, sell: 2400 },
  { id: uid(), name: 'Saiyan Flyball Click 10G', stock: 3, buy: 99, sell: 280 },
  { id: uid(), name: 'Saiyan Flyball Click 16G', stock: 3, buy: 99, sell: 280 },
  { id: uid(), name: 'Saiyan Flyball M3 9G', stock: 3, buy: 99, sell: 280 },
  { id: uid(), name: 'Saiyan Flyball Click 17G', stock: 3, buy: 99, sell: 300 },
  { id: uid(), name: 'Saiyan Pulley Slider Mio', stock: 3, buy: 80, sell: 180 },
  { id: uid(), name: 'Saiyan Pulley Slider Beat', stock: 3, buy: 80, sell: 180 },
  { id: uid(), name: 'Saiyan Engine Valve Click', stock: 3, buy: 50, sell: 200 },
  { id: uid(), name: 'Saiyan Engine Valve Raider150', stock: 3, buy: 50, sell: 200 },
  { id: uid(), name: 'Saiyan Pulley Slider Aerox', stock: 3, buy: 418, sell: 650 },
  { id: uid(), name: 'Saiyan CDI Mio Sporty', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'Saiyan CDI Beat', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'Saiyan CDI Mio Soul', stock: 3, buy: 75, sell: 150 },
  { id: uid(), name: 'Saiyan CDI Mio 125 MX', stock: 3, buy: 109, sell: 200 },
  { id: uid(), name: 'Saiyan Fuel Filter Click150', stock: 5, buy: 16, sell: 100 },
  { id: uid(), name: 'Saiyan Handle Switch TMX', stock: 3, buy: 87, sell: 300 },
  { id: uid(), name: 'SMOK Mini Driving Light V1', stock: 3, buy: 214, sell: 850 },
  { id: uid(), name: 'Saiyan Piston Kit XRM110 STD', stock: 3, buy: 92, sell: 360 },
  { id: uid(), name: 'Saiyan Flasher Relay w/ Adjuster', stock: 3, buy: 92, sell: 180 },
  { id: uid(), name: 'Saiyan Piston Ring TMX155 STD', stock: 10, buy: 218, sell: 380 },
  { id: uid(), name: 'Saiyan Piston Kit Mio STD', stock: 3, buy: 218, sell: 380 },

  { id: uid(), name: 'Pito Tubeless Silver', stock: 20, buy: 20, sell: 35 },
  { id: uid(), name: 'Saiyan Knuckle Bearing Mio', stock: 5, buy: 70, sell: 200 },
  { id: uid(), name: 'Saiyan Knuckle Bearing R150', stock: 5, buy: 70, sell: 200 },
  { id: uid(), name: 'Saiyan Piston Kit TMX155 STD (alt)', stock: 5, buy: 226, sell: 350 },
  { id: uid(), name: 'Saiyan Piston Kit Click125 STD', stock: 5, buy: 225, sell: 350 },
  { id: uid(), name: 'Saiyan Piston Kit Wave110 STD', stock: 5, buy: 214, sell: 350 },
  { id: uid(), name: 'JVT Center Spring Click 1000', stock: 3, buy: 160, sell: 250 },
  { id: uid(), name: 'Otaka Brake Shoe TMX155 Rear', stock: 5, buy: 93, sell: 180 },
  { id: uid(), name: 'ZIC M9 10W40 1L', stock: 12, buy: 277, sell: 380 },
  { id: uid(), name: 'ZIC M9 10W40 800mL', stock: 12, buy: 243, sell: 330 },
  { id: uid(), name: 'ZIC M7 10W40 1L', stock: 12, buy: 263, sell: 280 },
  { id: uid(), name: 'ZIC M7 10W40 800mL', stock: 12, buy: 220, sell: 263 },
  { id: uid(), name: 'Castrol Activ 20W40 800mL', stock: 10, buy: 138, sell: 200 },
  { id: uid(), name: 'Shell AX7 10W40 1L', stock: 10, buy: 260, sell: 350 },
  { id: uid(), name: 'Shell AX7 Scooter 800mL', stock: 6, buy: 150, sell: 200 },
  { id: uid(), name: 'Yamalube Blue Auto 20W40 800mL', stock: 6, buy: 180, sell: 250 },
  { id: uid(), name: 'Yamalube Blue Core 10W40 1L', stock: 6, buy: 200, sell: 280 },
  { id: uid(), name: 'Havoline Ezy 20W40 800mL', stock: 5, buy: 160, sell: 200 },
  { id: uid(), name: 'Petron Sprint 1L', stock: 5, buy: 168, sell: 250 },
  { id: uid(), name: 'Petron Sprint 2T', stock: 5, buy: 45, sell: 75 },
  { id: uid(), name: 'TOP UP 200mL (alt)', stock: 5, buy: 33, sell: 100 },
  { id: uid(), name: 'Amalie Gear Oil 80W90 120mL', stock: 5, buy: 45, sell: 100 },
  { id: uid(), name: 'Zeno Gear Oil 80W90 120mL', stock: 5, buy: 45, sell: 100 },
  { id: uid(), name: 'Koby Coolant Blue 1L', stock: 4, buy: 160, sell: 200 },
  { id: uid(), name: 'Koby Coolant Green 1L', stock: 4, buy: 160, sell: 200 },
  { id: uid(), name: 'Koby Coolant Pink 1L', stock: 4, buy: 160, sell: 200 },
  { id: uid(), name: 'Brake Fluid Surebrake 150mL', stock: 5, buy: 38, sell: 150 },
  { id: uid(), name: 'Saiyan Tire Sealant 500mL (alt)', stock: 5, buy: 48, sell: 120 },
  { id: uid(), name: 'Saiyan Tire Black', stock: 5, buy: 103, sell: 200 },
  { id: uid(), name: 'Koby CVT Cleaner 450mL', stock: 5, buy: 88, sell: 200 },
  { id: uid(), name: 'Volga Fork Oil 200mL', stock: 5, buy: 33, sell: 150 },
  { id: uid(), name: 'OD Battery 12N6.5L', stock: 3, buy: 950, sell: 1100 },
  { id: uid(), name: 'OD Battery YB3L', stock: 3, buy: 770, sell: 890 },
  { id: uid(), name: 'OD Battery YTX5L', stock: 3, buy: 850, sell: 890 },
  { id: uid(), name: 'Koby Hi-Temp Grease 10G', stock: 30, buy: 10, sell: 20 },
  { id: uid(), name: 'Saiyan Protectant Spray', stock: 30, buy: 20, sell: 30 },
  { id: uid(), name: 'FRZA Spark Plug C7HSA', stock: 10, buy: 53, sell: 120 },
  { id: uid(), name: 'FRZA Spark Plug CR8E', stock: 10, buy: 53, sell: 120 },
  { id: uid(), name: 'FRZA Spark Plug D8EA', stock: 10, buy: 53, sell: 120 },
  { id: uid(), name: 'FRZA Spark Plug CPR8EA-9', stock: 10, buy: 55, sell: 120 },
  { id: uid(), name: 'FRZA Spark Plug BP7HS', stock: 10, buy: 58, sell: 120 },
  { id: uid(), name: 'Otaka Throttle Cable Mio', stock: 5, buy: 43, sell: 200 },
  { id: uid(), name: 'Otaka Throttle Cable TMX155', stock: 5, buy: 43, sell: 180 },
  { id: uid(), name: 'Otaka Clutch Cable TMX155', stock: 5, buy: 53, sell: 180 },
  { id: uid(), name: 'Otaka Clutch Cable Raider150', stock: 5, buy: 53, sell: 200 },

  { id: uid(), name: 'Saiyan Rocker Arm TMX Cam Follower', stock: 3, buy: 115, sell: 280 },
  { id: uid(), name: 'Saiyan Rocker Arm TMX Upper', stock: 3, buy: 218, sell: 420 },
  { id: uid(), name: 'Saiyan Rocker Arm Wave125', stock: 3, buy: 245, sell: 450 },
  { id: uid(), name: 'OD Battery 12NSL', stock: 3, buy: 585, sell: 900 },
  { id: uid(), name: 'OD Battery YTX4L', stock: 3, buy: 755, sell: 800 },
  { id: uid(), name: 'OD Battery YTZ7S', stock: 3, buy: 755, sell: 1150 },
  { id: uid(), name: 'ZIC M5 1L 20W50', stock: 10, buy: 109, sell: 200 },
  { id: uid(), name: 'Havoline EZY 4T 1L', stock: 10, buy: 209, sell: 280 },
  { id: uid(), name: 'Havoline SF 1L', stock: 10, buy: 208, sell: 280 },
  { id: uid(), name: 'Castrol Activ 20W40 1L', stock: 10, buy: 230, sell: 300 },
  { id: uid(), name: 'Zeno Brake Pad Mio', stock: 3, buy: 70, sell: 120 },
  { id: uid(), name: 'Zeno Brake Pad Click150', stock: 3, buy: 70, sell: 120 },
  { id: uid(), name: 'Zeno Brake Pad XRM Trinity', stock: 3, buy: 70, sell: 120 },
  { id: uid(), name: 'Saiyan Engine Valve XRM110', stock: 3, buy: 32, sell: 200 },
  { id: uid(), name: 'Saiyan Engine Valve Aerox155', stock: 3, buy: 130, sell: 350 },
  { id: uid(), name: 'Otaka Air Filter Aerox155 (alt)', stock: 3, buy: 130, sell: 350 },
  { id: uid(), name: 'Saiyan Air Filter Beat', stock: 3, buy: 80, sell: 200 },
  { id: uid(), name: 'Saiyan Air Filter Beat FI', stock: 3, buy: 134, sell: 250 },
  { id: uid(), name: 'Saiyan Air Filter Raider150', stock: 3, buy: 134, sell: 250 },
  { id: uid(), name: 'Saiyan Air Filter TMX Supremo', stock: 3, buy: 180, sell: 350 },
  { id: uid(), name: 'Saiyan Air Filter Mio Soul', stock: 3, buy: 115, sell: 250 },
  { id: uid(), name: 'Saiyan Air Filter Mio/ADV160', stock: 3, buy: 115, sell: 250 },
  { id: uid(), name: 'Saiyan Fuel Cock Soul', stock: 3, buy: 80, sell: 230 },
  { id: uid(), name: 'Saiyan Fuel Cock Raider150 (alt)', stock: 3, buy: 80, sell: 200 },
  { id: uid(), name: 'Saiyan Fuel Cock Universal', stock: 3, buy: 80, sell: 200 },
  { id: uid(), name: 'Saiyan Piston Ring Mio', stock: 10, buy: 77, sell: 180 },
  { id: uid(), name: 'Saiyan Piston Ring XRM110', stock: 10, buy: 77, sell: 180 },
  { id: uid(), name: 'Saiyan Piston Ring Click125', stock: 10, buy: 84, sell: 200 },
  { id: uid(), name: 'Saiyan Piston Ring TMX155', stock: 10, buy: 84, sell: 200 },
  { id: uid(), name: 'Otaka Brake Shoe Beat', stock: 10, buy: 95, sell: 280 },
  { id: uid(), name: 'Zeno Flyball Click125 12G', stock: 5, buy: 263, sell: 400 },
  { id: uid(), name: 'Zeno Flyball 14G', stock: 5, buy: 313, sell: 400 },
  { id: uid(), name: 'Zeno Flyball Mio 7G', stock: 5, buy: 173, sell: 200 },
  { id: uid(), name: 'Zeno Flyball Mio 9G', stock: 5, buy: 173, sell: 200 },
  { id: uid(), name: 'Zeno Flyball Mio 10G', stock: 5, buy: 173, sell: 200 },
  { id: uid(), name: 'Zeno Flyball Mio 8G', stock: 5, buy: 173, sell: 200 },
  { id: uid(), name: 'Otaka Bearing 6205', stock: 10, buy: 32, sell: 100 },
  { id: uid(), name: 'Saiyan Bearing 6203', stock: 10, buy: 19, sell: 100 },
  { id: uid(), name: 'Saiyan Bearing 6201', stock: 10, buy: 19, sell: 100 },
  { id: uid(), name: 'Saiyan Bearing 6300', stock: 10, buy: 22, sell: 100 },
  { id: uid(), name: 'Saiyan Bearing 6202', stock: 10, buy: 22, sell: 100 },
  { id: uid(), name: 'Saiyan Ball Race Aerox', stock: 5, buy: 69, sell: 200 },
  { id: uid(), name: 'Saiyan Ball Race Beat', stock: 5, buy: 69, sell: 200 },
  { id: uid(), name: 'Saiyan Ball Race Click', stock: 5, buy: 69, sell: 200 },
  { id: uid(), name: 'Saiyan Ball Race Mio', stock: 5, buy: 69, sell: 200 },
  { id: uid(), name: 'Saiyan Ball Race Nmax', stock: 5, buy: 69, sell: 200 },
  { id: uid(), name: 'Saiyan Ball Race Raider150', stock: 5, buy: 69, sell: 200 },

  { id: uid(), name: 'Saiyan Sprocket TMX 53T', stock: 3, buy: 184, sell: 350 },
  { id: uid(), name: 'Saiyan Sprocket TMX 32T', stock: 3, buy: 103, sell: 280 },
  { id: uid(), name: 'Saiyan Sprocket TMX 48T', stock: 3, buy: 161, sell: 340 },
  { id: uid(), name: 'Saiyan Sprocket TMX 51T', stock: 3, buy: 225, sell: 340 },
  { id: uid(), name: 'Otaka Sprocket TMX155 34T', stock: 3, buy: 110, sell: 280 },
  { id: uid(), name: 'Otaka Sprocket TMX155 36T', stock: 3, buy: 110, sell: 280 },
  { id: uid(), name: 'Otaka Sprocket XRM/Wave125 34T', stock: 3, buy: 113, sell: 280 },
  { id: uid(), name: 'Otaka Sprocket TMX155 42T', stock: 3, buy: 170, sell: 280 },
  { id: uid(), name: 'Saiyan Sprocket TMX 45T', stock: 3, buy: 109, sell: 300 },
  { id: uid(), name: 'Saiyan Engine Sprocket TMX 13T', stock: 3, buy: 32, sell: 80 },
  { id: uid(), name: 'Saiyan Engine Sprocket TMX 14T', stock: 3, buy: 32, sell: 80 },
  { id: uid(), name: 'Saiyan Engine Sprocket XRM 13T', stock: 3, buy: 32, sell: 80 },
  { id: uid(), name: 'Saiyan Engine Sprocket XRM 14T', stock: 3, buy: 32, sell: 80 },
  { id: uid(), name: 'Otaka Brake Pad Mio125', stock: 3, buy: 96, sell: 200 },
  { id: uid(), name: 'Otaka Brake Pad XRM', stock: 3, buy: 96, sell: 200 },
  { id: uid(), name: 'Saiyan Manifold TMX Supremo', stock: 3, buy: 122, sell: 280 },
  { id: uid(), name: 'Saiyan Manifold XRM110', stock: 3, buy: 99, sell: 280 },
  { id: uid(), name: 'Saiyan Air Filter TMX155 Foam', stock: 3, buy: 38, sell: 150 },
  { id: uid(), name: 'Saiyan Air Filter Wave100', stock: 3, buy: 38, sell: 150 },
  { id: uid(), name: 'Saiyan Air Filter Wave Dash', stock: 3, buy: 75, sell: 280 },
  { id: uid(), name: 'Saiyan Air Filter XRM125 FI', stock: 3, buy: 75, sell: 280 },
  { id: uid(), name: 'Saiyan CDI TMX Supremo', stock: 3, buy: 109, sell: 780 },
  { id: uid(), name: 'Saiyan CDI TMX155', stock: 3, buy: 109, sell: 780 },
  { id: uid(), name: 'Saiyan CDI XRM110', stock: 3, buy: 109, sell: 280 },
  { id: uid(), name: 'Saiyan Main Switch TMX125 Alpha', stock: 3, buy: 145, sell: 290 },
  { id: uid(), name: 'Saiyan Main Switch XRM110', stock: 3, buy: 92, sell: 200 },
  { id: uid(), name: 'Saiyan Main Switch Wave125', stock: 3, buy: 92, sell: 200 },
  { id: uid(), name: 'Saiyan Brake Pedal TMX', stock: 3, buy: 92, sell: 280 },
  { id: uid(), name: 'Saiyan Brake Pedal XRM', stock: 3, buy: 92, sell: 280 },
  { id: uid(), name: 'Domino Seat Cover Carbon', stock: 3, buy: 200, sell: 280 },
  { id: uid(), name: 'Zeno Seat Cover', stock: 3, buy: 200, sell: 280 },

  { id: uid(), name: 'Signal Light Aerox', stock: 2, buy: 120, sell: 280 },
  { id: uid(), name: 'Front Fork Oil Seal Bana', stock: 3, buy: 150, sell: 200 },
  { id: uid(), name: 'Regulator TMX Alpha', stock: 1, buy: 250, sell: 350 },
  { id: uid(), name: 'Fuel Cock TMX', stock: 1, buy: 75, sell: 150 },
  { id: uid(), name: 'Throttle Universal', stock: 1, buy: 250, sell: 300 },
  { id: uid(), name: 'Clutch Dumper', stock: 1, buy: 100, sell: 280 },
  { id: uid(), name: 'Ball Race Click/Beat', stock: 2, buy: 150, sell: 250 },
  { id: uid(), name: 'Air Filter Universal', stock: 1, buy: 70, sell: 150 },
  { id: uid(), name: 'COI Socket XRM', stock: 2, buy: 20, sell: 50 },
  { id: uid(), name: 'Mirror Holder Universal', stock: 4, buy: 25, sell: 50 },
  { id: uid(), name: 'Horn Relay Universal', stock: 2, buy: 15, sell: 35 },
  { id: uid(), name: 'Halogen Bulb', stock: 2, buy: 35, sell: 95 },
  { id: uid(), name: 'Tank Cap', stock: 1, buy: 135, sell: 320 },
  { id: uid(), name: 'Carbon Brush', stock: 3, buy: 70, sell: 180 },
  { id: uid(), name: 'Additives', stock: 12, buy: 215, sell: 285 },
  { id: uid(), name: 'Head Lamp Big KWS', stock: 6, buy: 25, sell: 45 },
  { id: uid(), name: 'Head Lamp Small KWS', stock: 3, buy: 10, sell: 30 },
  { id: uid(), name: 'Fuse Tube', stock: 6, buy: 3, sell: 15 },
  { id: uid(), name: 'Fuse Flat', stock: 6, buy: 5, sell: 15 },
  { id: uid(), name: 'Chain Lock', stock: 10, buy: 10, sell: 25 },

  { id: uid(), name: 'Engine Sprocket TMX AT', stock: 1, buy: 40, sell: 100 },
  { id: uid(), name: 'Handle Switch Rubí TC125', stock: 2, buy: 120, sell: 300 },
  { id: uid(), name: 'Fuel Filter (alt)', stock: 2, buy: 5, sell: 30 },
  { id: uid(), name: 'Exhaust Gasket', stock: 1, buy: 5, sell: 30 },
  { id: uid(), name: 'Switch On/Off', stock: 7, buy: 20, sell: 35 },
  { id: uid(), name: 'Brake Rod Universal', stock: 1, buy: 180, sell: 195 },
  { id: uid(), name: 'Tail Light Wave125', stock: 1, buy: 280, sell: 285 },
  { id: uid(), name: 'Light Outer Tube', stock: 1, buy: 780, sell: 980 },
  { id: uid(), name: 'Fender Clip Universal', stock: 2, buy: 75, sell: 110 },
  { id: uid(), name: 'Hydraulic Brake Light Switch', stock: 2, buy: 120, sell: 180 },
  { id: uid(), name: 'Throttle Pipe (alt)', stock: 1, buy: 15, sell: 40 },
  { id: uid(), name: 'Brake Light Switch', stock: 4, buy: 35, sell: 80 },
  { id: uid(), name: 'Slider Pulley', stock: 2, buy: 100, sell: 200 },
  { id: uid(), name: 'Caliper Repair Kit', stock: 4, buy: 65, sell: 150 },
  { id: uid(), name: 'Carburetor Repair Kit', stock: 1, buy: 65, sell: 150 },
  { id: uid(), name: 'Cam Chain Kit', stock: 3, buy: 350, sell: 750 },
  { id: uid(), name: 'Flyball Chicken Mox', stock: 5, buy: 120, sell: 350 },
  { id: uid(), name: 'Signal Light Big', stock: 3, buy: 50, sell: 150 },
  { id: uid(), name: 'Handle Grip RCB', stock: 2, buy: 115, sell: 250 },
  { id: uid(), name: 'Genuine Flyball Universal', stock: 4, buy: 220, sell: 480 },
  { id: uid(), name: 'Fan Belt', stock: 3, buy: 180, sell: 380 },
  { id: uid(), name: 'Fuel Filter FI', stock: 2, buy: 50, sell: 200 },
  { id: uid(), name: 'Timing Chain Set XRM110', stock: 3, buy: 230, sell: 450 },

  { id: uid(), name: 'Cylinder Block WMM', stock: 1, buy: 2180, sell: 3080 },
  { id: uid(), name: 'Tire Hero Rider 110', stock: 1, buy: 685, sell: 1010 },
  { id: uid(), name: 'Oil Filter Yamaha (bulk)', stock: 15, buy: 37, sell: 100 },
  { id: uid(), name: 'Side Mirror Yamaha', stock: 2, buy: 71, sell: 180 },
  { id: uid(), name: 'Domino Side Mirror', stock: 1, buy: 100, sell: 260 },
  { id: uid(), name: 'Bar End Side Mirror', stock: 1, buy: 200, sell: 400 },
  { id: uid(), name: 'Oil Seat Set Mio', stock: 1, buy: 75, sell: 180 },
  { id: uid(), name: 'Center Spring (set)', stock: 3, buy: 226, sell: 350 },
  { id: uid(), name: 'LED Module Light', stock: 20, buy: 15, sell: 30 },
  { id: uid(), name: 'Kargador TMX/Rusi', stock: 2, buy: 15, sell: 30 },
  { id: uid(), name: 'Rubber Foot Rest', stock: 2, buy: 30, sell: 60 },
  { id: uid(), name: 'Throttle Cable Mio (pair)', stock: 2, buy: 80, sell: 160 },
  { id: uid(), name: 'Throttle Cable Rusi', stock: 2, buy: 80, sell: 160 },
  { id: uid(), name: 'Brake Cable Yamaha', stock: 1, buy: 77, sell: 120 },
  { id: uid(), name: 'Clutch Cable Rider', stock: 1, buy: 77, sell: 120 },
  { id: uid(), name: 'Rubber Dumper', stock: 2, buy: 40, sell: 100 },
  { id: uid(), name: 'Rear Axle XRM', stock: 4, buy: 85, sell: 200 },
  { id: uid(), name: 'Swing Arm Bushing XRM', stock: 6, buy: 85, sell: 200 },
  { id: uid(), name: 'Brake Cam TMX', stock: 4, buy: 85, sell: 200 },
  { id: uid(), name: 'Kick Starter XRM110', stock: 1, buy: 110, sell: 120 },
  { id: uid(), name: 'Rear Sprocket 4T', stock: 2, buy: 180, sell: 220 },
  { id: uid(), name: 'Rear Sprocket 40T', stock: 4, buy: 175, sell: 225 },
  { id: uid(), name: 'Harness Wire Assorted', stock: 8, buy: 87, sell: 800 },

  { id: uid(), name: 'XRM Trinity Front Fender', stock: 5, buy: 150, sell: 300 },
  { id: uid(), name: 'Universal Front Fender', stock: 7, buy: 100, sell: 220 },
  { id: uid(), name: 'Popsop Music', stock: 3, buy: 200, sell: 350 },
  { id: uid(), name: 'TMX155 Makoto Brake Shoe', stock: 9, buy: 110, sell: 280 },
  { id: uid(), name: 'CT100 Brake Shoe', stock: 3, buy: 50, sell: 180 },
  { id: uid(), name: 'Piston Rings (bundle)', stock: 26, buy: 175, sell: 300 },
  { id: uid(), name: 'Spark Plug (bulk)', stock: 37, buy: 87, sell: 120 },
  { id: uid(), name: '6303 Koyo Bearing', stock: 9, buy: 81, sell: 180 },
  { id: uid(), name: '6300 Koyo Bearing', stock: 9, buy: 81, sell: 160 },
  { id: uid(), name: '6004 Koyo Bearing', stock: 2, buy: 55, sell: 120 },
  { id: uid(), name: '6302 Koyo Bearing', stock: 4, buy: 57, sell: 120 },
  { id: uid(), name: '6202 Koyo Bearing', stock: 1, buy: 41, sell: 110 },
  { id: uid(), name: 'Stator Coil', stock: 3, buy: 375, sell: 780 },
  { id: uid(), name: 'FBE Ignition Switch', stock: 1, buy: 187, sell: 380 },
  { id: uid(), name: 'Iridium Spark Plug', stock: 8, buy: 100, sell: 280 },
  { id: uid(), name: 'Center Stand Spring', stock: 10, buy: 15, sell: 35 },
  { id: uid(), name: 'Pulley Set', stock: 4, buy: 480, sell: 1100 },
  { id: uid(), name: 'Ignition Switch', stock: 3, buy: 75, sell: 160 },
  { id: uid(), name: 'Plunger Hub C100', stock: 1, buy: 150, sell: 380 },
  { id: uid(), name: 'Brake Pad (std)', stock: 23, buy: 30, sell: 120 },
  { id: uid(), name: 'RS8 Brake Pad', stock: 1, buy: 100, sell: 280 },
  { id: uid(), name: 'OKM Brake Pad', stock: 2, buy: 60, sell: 180 },
  { id: uid(), name: 'Cylinder Block Mio1', stock: 1, buy: 900, sell: 1600 }
];

let state = { items: [], sales: [], expenses: [] };

function saveState(){
  try{ localStorage.setItem(STORAGE_KEY_V3, JSON.stringify(state)); }
  catch(e){ alert('Error saving data to localStorage: ' + (e.message || e)); }
}

function loadState(){
  const raw = localStorage.getItem(STORAGE_KEY_V3);
  if(!raw){
    state.items = seedItems.slice();
    state.sales = [];
    state.expenses = [];
    saveState();
    return;
  }
  try{
    const parsed = JSON.parse(raw);
    state.items = Array.isArray(parsed.items) ? parsed.items : seedItems.slice();
    state.sales = Array.isArray(parsed.sales) ? parsed.sales : [];
    state.expenses = Array.isArray(parsed.expenses) ? parsed.expenses : [];
  }catch(e){
    console.warn('Failed to parse saved state, seeding defaults.', e);
    state.items = seedItems.slice();
    state.sales = [];
    state.expenses = [];
    saveState();
  }
}

loadState();

/* PART 3 WILL START HERE — DOM hooks, rendering, sales, expenses, import handlers, etc. */
  /* ---------- PART 3: DOM elements, rendering, search, add/edit logic ---------- */

// DOM references
const itemTable = document.getElementById("itemTable");
const saleItemInput = document.getElementById("saleItemInput");
const saleQtyInput = document.getElementById("saleQtyInput");
const salePriceInput = document.getElementById("salePriceInput");
const saleDateInput = document.getElementById("saleDateInput");
const salesTable = document.getElementById("salesTable");
const expenseNameInput = document.getElementById("expenseNameInput");
const expenseAmountInput = document.getElementById("expenseAmountInput");
const expenseDateInput = document.getElementById("expenseDateInput");
const expenseTable = document.getElementById("expenseTable");
const searchInput = document.getElementById("searchInput");

// Search items (instant live search)
function filterItems() {
  const q = searchInput.value.toLowerCase();
  return state.items.filter(item =>
    item.name.toLowerCase().includes(q)
  );
}

// Render item table
function renderItems() {
  const items = filterItems();
  itemTable.innerHTML = items.map((item, index) => `
    <tr>
      <td>${index + 1}</td>
      <td>
        <input class="edit-name" data-id="${item.id}" value="${item.name}">
      </td>
      <td>
        <input class="edit-stock" data-id="${item.id}" type="number" value="${item.stock}">
      </td>
      <td>
        <input class="edit-buy" data-id="${item.id}" type="number" value="${item.buy}">
      </td>
      <td>
        <input class="edit-sell" data-id="${item.id}" type="number" value="${item.sell}">
      </td>
    </tr>
  `).join("");
}

// Auto-save on edit
document.addEventListener("input", function (e) {
  const id = e.target.dataset.id;
  if (!id) return;

  let item = state.items.find(i => i.id === id);
  if (!item) return;

  if (e.target.classList.contains("edit-name")) item.name = e.target.value;
  if (e.target.classList.contains("edit-stock")) item.stock = Number(e.target.value);
  if (e.target.classList.contains("edit-buy")) item.buy = Number(e.target.value);
  if (e.target.classList.contains("edit-sell")) item.sell = Number(e.target.value);

  saveState();
});

// Render sales
function renderSales() {
  salesTable.innerHTML = state.sales.map((s, index) => `
    <tr>
      <td>${index + 1}</td>
      <td>${s.name}</td>
      <td>${s.qty}</td>
      <td>${s.price}</td>
      <td>${s.total}</td>
      <td>${s.date}</td>
    </tr>
  `).join("");
}

// Render expenses
function renderExpenses() {
  expenseTable.innerHTML = state.expenses.map((e, index) => `
    <tr>
      <td>${index + 1}</td>
      <td>${e.name}</td>
      <td>${e.amount}</td>
      <td>${e.date}</td>
    </tr>
  `).join("");
}

/* ---------- ADD SALE ---------- */
document.getElementById("addSaleBtn").addEventListener("click", function () {
  const name = saleItemInput.value.trim();
  const qty = Number(saleQtyInput.value);
  const price = Number(salePriceInput.value);
  const date = saleDateInput.value || new Date().toISOString().split("T")[0];

  if (!name || qty <= 0 || price <= 0) return alert("Complete the fields");

  // Find item
  const item = state.items.find(i => i.name.toLowerCase() === name.toLowerCase());
  if (!item) return alert("Item not found!");

  // Deduct stock
  if (item.stock < qty) return alert("Not enough stock!");
  item.stock -= qty;

  const total = qty * price;

  state.sales.push({
    name,
    qty,
    price,
    total,
    date
  });

  saveState();
  renderItems();
  renderSales();

  saleItemInput.value = "";
  saleQtyInput.value = "";
  salePriceInput.value = "";
});

/* ---------- ADD EXPENSE ---------- */
document.getElementById("addExpenseBtn").addEventListener("click", function () {
  const name = expenseNameInput.value.trim();
  const amount = Number(expenseAmountInput.value);
  const date = expenseDateInput.value || new Date().toISOString().split("T")[0];

  if (!name || amount <= 0) return alert("Complete expense fields");

  state.expenses.push({
    name,
    amount,
    date
  });

  saveState();
  renderExpenses();

  expenseNameInput.value = "";
  expenseAmountInput.value = "";
});

/* ---------- INITIAL RENDER ---------- */
renderItems();
renderSales();
renderExpenses();
  /* ---------- PART 4: TOTALS, PROFIT, PRINT, IMPORT/EXPORT, SEARCH SUGGESTIONS ---------- */

/* ---------- Compute totals ---------- */
function computeTotals() {
  const totalSales = state.sales.reduce((t, s) => t + s.total, 0);
  const totalProfit = state.sales.reduce((t, s) => {
    // Compute correct profit based on matching item
    const item = state.items.find(i => i.name.toLowerCase() === s.name.toLowerCase());
    if (!item) return t;
    const profitPer = (s.price - item.buy);
    return t + profitPer * s.qty;
  }, 0);

  const totalExpenses = state.expenses.reduce((t, e) => t + e.amount, 0);

  document.getElementById("totalSalesDisplay").textContent = "₱" + totalSales.toLocaleString();
  document.getElementById("totalProfitDisplay").textContent = "₱" + (totalProfit - totalExpenses).toLocaleString();
  document.getElementById("totalExpensesDisplay").textContent = "₱" + totalExpenses.toLocaleString();
}

computeTotals();

/* ---------- PRINT SALES (A4) ---------- */
document.getElementById("printSalesBtn").addEventListener("click", () => {
  let html = `
    <h2>Makoi Inventory System — Sales Report</h2>
    <table style="width:100%;border-collapse:collapse" border="1">
      <thead>
        <tr>
          <th>Date</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Selling Price</th>
          <th>Total</th>
          <th>Profit</th>
        </tr>
      </thead>
      <tbody>
  `;

  state.sales.forEach(s => {
    const item = state.items.find(i => i.name.toLowerCase() === s.name.toLowerCase());
    const profit = item ? (s.price - item.buy) * s.qty : 0;

    html += `
      <tr>
        <td>${s.date}</td>
        <td>${s.name}</td>
        <td>${s.qty}</td>
        <td>₱${s.price}</td>
        <td>₱${s.total}</td>
        <td>₱${profit}</td>
      </tr>
    `;
  });

  html += `</tbody></table>`;

  const printWin = window.open("", "_blank");
  printWin.document.write(html);
  printWin.document.close();
  printWin.print();
});

/* ---------- IMPORT ITEMS (Pipe Format) ---------- */
document.getElementById("importBtn").addEventListener("click", () => {
  const raw = document.getElementById("importText").value.trim();
  if (!raw) return alert("No data to import.");

  const lines = raw.split("\n");

  lines.forEach(line => {
    const parts = line.split("|").map(p => p.trim());
    if (parts.length < 4) return;

    const qty = Number(parts[0]);
    const name = parts[1];
    const buy = Number(parts[2]);
    const sell = Number(parts[3]);

    // Check if existing
    let item = state.items.find(i => i.name.toLowerCase() === name.toLowerCase());

    if (item) {
      // Update
      item.stock = qty;
      item.buy = buy;
      item.sell = sell;
    } else {
      // New
      state.items.push({
        id: uid(),
        name,
        stock: qty,
        buy,
        sell
      });
    }
  });

  saveState();
  renderItems();
  alert("Items imported successfully!");
});

/* ---------- EXPORT ITEMS CSV ---------- */
document.getElementById("exportItems").addEventListener("click", () => {
  let csv = "name,stock,buy,sell\n";
  state.items.forEach(i => {
    csv += `${i.name},${i.stock},${i.buy},${i.sell}\n`;
  });

  const a = document.createElement("a");
  a.href = "data:text/csv;charset=utf-8," + encodeURIComponent(csv);
  a.download = "items.csv";
  a.click();
});

/* ---------- EXPORT SALES CSV ---------- */
document.getElementById("exportSales").addEventListener("click", () => {
  let csv = "name,qty,price,total,date\n";
  state.sales.forEach(s => {
    csv += `${s.name},${s.qty},${s.price},${s.total},${s.date}\n`;
  });

  const a = document.createElement("a");
  a.href = "data:text/csv;charset=utf-8," + encodeURIComponent(csv);
  a.download = "sales.csv";
  a.click();
});

/* ---------- BACKUP JSON ---------- */
document.getElementById("backupBtn").addEventListener("click", () => {
  const data = JSON.stringify(state);
  const a = document.createElement("a");
  a.href = "data:application/json," + encodeURIComponent(data);
  a.download = "makoi_backup.json";
  a.click();
});

/* ---------- RESTORE JSON ---------- */
document.getElementById("restoreBtn").addEventListener("click", () => {
  const text = prompt("Paste your JSON backup here:");
  if (!text) return;

  try {
    const data = JSON.parse(text);
    localStorage.setItem("makoi_inventory_v3", JSON.stringify(data));
    location.reload();
  } catch (e) {
    alert("Invalid JSON!");
  }
});

/* ---------- SEARCH BAR LIVE SUGGESTIONS ---------- */
const suggest = document.getElementById("saleItemSuggest");
const itemInput = document.getElementById("saleItemInput");

itemInput.addEventListener("input", () => {
  const q = itemInput.value.toLowerCase();
  if (!q) {
    suggest.style.display = "none";
    return;
  }

  const matches = state.items.filter(i =>
    i.name.toLowerCase().includes(q)
  );

  if (!matches.length) {
    suggest.style.display = "none";
    return;
  }

  suggest.innerHTML = matches
    .map(m => `<div class="suggest" data-name="${m.name}">${m.name}</div>`)
    .join("");

  suggest.style.display = "block";
});

// pick suggestion
suggest.addEventListener("click", e => {
  if (e.target.classList.contains("suggest")) {
    const name = e.target.dataset.name;
    itemInput.value = name;

    // auto-fill buy/sell
    const item = state.items.find(i => i.name === name);
    if (item) {
      salePriceInput.value = item.sell;
      saleBuyPriceInput.value = item.buy;
    }

    suggest.style.display = "none";
  }
});

</script>
</body>
</html>
